<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>walle by meolu</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">walle</h1>
      <h2 class="project-tagline">代码部署工具</h2>
      <a href="https://github.com/meolu/walle-web" class="btn">View on GitHub</a>
      <a href="https://github.com/meolu/walle-web/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/meolu/walle-web/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <p><img src="https://raw.github.com/meolu/walle-web/master/screenshots/logo.jpg" alt=""></p>

<h1>
<a id="瓦力---部署系统" class="anchor" href="#%E7%93%A6%E5%8A%9B---%E9%83%A8%E7%BD%B2%E7%B3%BB%E7%BB%9F" aria-hidden="true"><span class="octicon octicon-link"></span></a>瓦力 - 部署系统</h1>

<p><a href="https://travis-ci.org/meolu/walle-web"><img src="https://travis-ci.org/meolu/walle-web.svg?branch=master" alt="Build Status"></a>
<a href="https://packagist.org/packages/meolu/walle-web"><img src="https://img.shields.io/packagist/v/meolu/walle-web.svg" alt="Packagist"></a></p>

<p>Walle 一个web部署系统工具，可能也是个持续发布工具，配置简单、功能完善、界面流畅、开箱即用！支持git、svn版本管理，支持各种web代码发布，静态的HTML，动态PHP，需要编译的JAVA等。</p>

<p><a href="http://www.huamanshu.com/walle.html">官网主页</a>了解更多。<a href="https://github.com/meolu/walle-web/blob/master/example/README-en.md">English Readme</a>，喜欢请为我标star吧：）</p>

<ul>
<li>用户分身份注册、登录</li>
<li>开发者发起上线任务申请、部署</li>
<li>管理者审核上线任务</li>
<li>支持多项目部署</li>
<li>支持多项目多任务并行</li>
<li>快速回滚</li>
<li>项目的用户权限管理</li>
<li>部署前准备任务pre-deploy（前置检查）</li>
<li>代码检出后处理任务post-deploy（如vendor）</li>
<li>同步后更新软链前置任务pre-release</li>
<li>发布完毕后收尾任务post-release（如重启）</li>
<li>执行sql构建（不要担心忘记测试环境sql同步）</li>
<li>线上文件指纹确认</li>
<li>支持git、svn版本管理</li>
</ul>

<h2>
<a id="依赖" class="anchor" href="#%E4%BE%9D%E8%B5%96" aria-hidden="true"><span class="octicon octicon-link"></span></a>依赖</h2>

<ul>
<li>bash(git、ssh)</li>
<li>LNMP、LAMP(php5.4+)</li>
<li>composer</li>
</ul>

<h2>
<a id="安装" class="anchor" href="#%E5%AE%89%E8%A3%85" aria-hidden="true"><span class="octicon octicon-link"></span></a>安装</h2>

<pre><code>git clone git@github.com:meolu/walle-web.git
cd walle-web
vi config/web.php # 设置mysql连接
composer install  # 如果缺少bower-asset的话， 先安装：composer global require "fxp/composer-asset-plugin:*"
./yii migrate/up  # 导入数据库
配置nginx/apache的webroot指向walle-web/web，简单范例详见页面底部常见问题和解决办法。
</code></pre>

<p>如有需要，移步<a href="https://github.com/meolu/walle-web/blob/master/docs/install.md">最最最详细安装指南</a></p>

<h2>
<a id="快速开始" class="anchor" href="#%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B" aria-hidden="true"><span class="octicon octicon-link"></span></a>快速开始</h2>

<ul>
<li>注册一个管理员身份用户(已有<code>admin/admin</code>)，配置一个项目。

<ul>
<li><a href="https://github.com/meolu/walle-web/blob/master/docs/config-git.md">git配置范例</a></li>
<li><a href="https://github.com/meolu/walle-web/blob/master/docs/config-svn.md">svn配置范例</a></li>
</ul>
</li>
<li>开发者注册用户(已有<code>demo/demo</code>)，提交上线单</li>
<li>管理员审核上线单</li>
<li>开发者发起上线</li>
</ul>

<h2>
<a id="高级自定义" class="anchor" href="#%E9%AB%98%E7%BA%A7%E8%87%AA%E5%AE%9A%E4%B9%89" aria-hidden="true"><span class="octicon octicon-link"></span></a>高级自定义</h2>

<p>此时你可能考虑要作为一个公司内部新项目的试用版本，那么你将需要做以下的处理，更适合业务需求。</p>

<ul>
<li>
<p>配置允许注册的邮箱后缀  </p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-c1">vi</span> <span class="pl-c1">config</span><span class="pl-k">/</span><span class="pl-c1">params</span><span class="pl-k">.</span><span class="pl-c1">php</span></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-s"><span class="pl-pds">'</span>mail-suffix<span class="pl-pds">'</span></span>   <span class="pl-k">=&gt;</span> [  <span class="pl-c">// 允许注册的邮箱后缀，一般为公司邮箱后缀，可多个</span></span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>huamanshu.com<span class="pl-pds">'</span></span>,  <span class="pl-c">// 如：只允许花满树邮箱注册</span></span>
<span class="pl-s1">]</span></pre></div>
</li>
<li>
<p>配置企业邮箱smtp</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-c1">vi</span> <span class="pl-c1">config</span><span class="pl-k">/</span><span class="pl-c1">web</span><span class="pl-k">.</span><span class="pl-c1">php</span> <span class="pl-k">+</span><span class="pl-c1">25</span></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c"># 配置mail smtp模块</span></span>
<span class="pl-s1"><span class="pl-s"><span class="pl-pds">'</span>class<span class="pl-pds">'</span></span>      <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>Swift_SmtpTransport<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1"><span class="pl-s"><span class="pl-pds">'</span>host<span class="pl-pds">'</span></span>       <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>smtp.huamanshu.com<span class="pl-pds">'</span></span>,    <span class="pl-c"># smtp 发件地址</span></span>
<span class="pl-s1"><span class="pl-s"><span class="pl-pds">'</span>username<span class="pl-pds">'</span></span>   <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>service@huamanshu.com<span class="pl-pds">'</span></span>, <span class="pl-c"># smtp 发件用户名</span></span>
<span class="pl-s1"><span class="pl-s"><span class="pl-pds">'</span>password<span class="pl-pds">'</span></span>   <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>password<span class="pl-pds">'</span></span>,              <span class="pl-c"># smtp 发件人的密码</span></span>
<span class="pl-s1"><span class="pl-s"><span class="pl-pds">'</span>port<span class="pl-pds">'</span></span>       <span class="pl-k">=&gt;</span> <span class="pl-c1">25</span>,                      <span class="pl-c"># smtp 端口</span></span>
<span class="pl-s1"><span class="pl-s"><span class="pl-pds">'</span>encryption<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>tls<span class="pl-pds">'</span></span>,                   <span class="pl-c"># smtp 协议</span></span>
<span class="pl-s1"></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c1">vi</span> <span class="pl-c1">config</span><span class="pl-k">/</span><span class="pl-c1">params</span><span class="pl-k">.</span><span class="pl-c1">php</span></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-s"><span class="pl-pds">'</span>support.email<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>service@huamanshu.com<span class="pl-pds">'</span></span>, <span class="pl-c">// 与config/web.php 中mail模块的username一致</span></span></pre></div>
</li>
<li>
<p>配置日志路径</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-c1">vi</span> <span class="pl-c1">config</span><span class="pl-k">/</span><span class="pl-c1">params</span><span class="pl-k">.</span><span class="pl-c1">php</span></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-s"><span class="pl-pds">'</span>log.dir<span class="pl-pds">'</span></span>   <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>/tmp/walle/<span class="pl-pds">'</span></span>, <span class="pl-c"># 注意读写权限</span></span></pre></div>
</li>
</ul>

<h2>
<a id="to-do-list" class="anchor" href="#to-do-list" aria-hidden="true"><span class="octicon octicon-link"></span></a>To Do List</h2>

<ul>
<li>Travis CI 集成</li>
<li>邮件提醒：可配置提醒事件</li>
<li>灰度发布：指定机器发布</li>
<li>引入websocket</li>
<li>静态资源管理器</li>
<li>自定义公司logo</li>
<li>自定义变量</li>
<li>支持国际化：增加英文语言</li>
<li>支持Docker</li>
<li>开放接口</li>
</ul>

<h2>
<a id="持续更新开启更多功能" class="anchor" href="#%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%E5%BC%80%E5%90%AF%E6%9B%B4%E5%A4%9A%E5%8A%9F%E8%83%BD" aria-hidden="true"><span class="octicon octicon-link"></span></a>持续更新开启更多功能</h2>

<pre><code>git pull
./yii migrate    # 更新数据库
</code></pre>

<h2>
<a id="截图" class="anchor" href="#%E6%88%AA%E5%9B%BE" aria-hidden="true"><span class="octicon octicon-link"></span></a>截图</h2>

<h4>
<a id="配置管理" class="anchor" href="#%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86" aria-hidden="true"><span class="octicon octicon-link"></span></a>配置管理</h4>

<p><img src="https://raw.github.com/meolu/walle-web/master/screenshots/walle-config-edit.jpg" alt=""></p>

<h4>
<a id="提交上线任务" class="anchor" href="#%E6%8F%90%E4%BA%A4%E4%B8%8A%E7%BA%BF%E4%BB%BB%E5%8A%A1" aria-hidden="true"><span class="octicon octicon-link"></span></a>提交上线任务</h4>

<p><img src="https://raw.github.com/meolu/walle-web/master/screenshots/walle-submit.jpg" alt=""></p>

<h4>
<a id="上线列表" class="anchor" href="#%E4%B8%8A%E7%BA%BF%E5%88%97%E8%A1%A8" aria-hidden="true"><span class="octicon octicon-link"></span></a>上线列表</h4>

<p><img src="https://raw.github.com/meolu/walle-web/master/screenshots/walle-dev-list.jpg" alt=""></p>

<h4>
<a id="宿主机目标机群操作用户关系" class="anchor" href="#%E5%AE%BF%E4%B8%BB%E6%9C%BA%E7%9B%AE%E6%A0%87%E6%9C%BA%E7%BE%A4%E6%93%8D%E4%BD%9C%E7%94%A8%E6%88%B7%E5%85%B3%E7%B3%BB" aria-hidden="true"><span class="octicon octicon-link"></span></a>宿主机、目标机群、操作用户关系</h4>

<p><img src="https://raw.github.com/meolu/walle-web/master/screenshots/walle-work.png" alt=""></p>

<h4>
<a id="上线流程图" class="anchor" href="#%E4%B8%8A%E7%BA%BF%E6%B5%81%E7%A8%8B%E5%9B%BE" aria-hidden="true"><span class="octicon octicon-link"></span></a>上线流程图</h4>

<p><img src="https://raw.github.com/meolu/walle-web/master/screenshots/walle-flow.png" alt=""></p>

<h4>
<a id="演示" class="anchor" href="#%E6%BC%94%E7%A4%BA" aria-hidden="true"><span class="octicon octicon-link"></span></a>演示</h4>

<p><img src="https://raw.github.com/meolu/walle-web/master/screenshots/walle.gif" alt=""></p>

<h2>
<a id="changelog" class="anchor" href="#changelog" aria-hidden="true"><span class="octicon octicon-link"></span></a>CHANGELOG</h2>

<p>瓦力的版本记录：<a href="https://github.com/meolu/walle-web/blob/master/docs/CHANGELOG.md">CHANGELOG</a></p>

<h2>
<a id="交流讨论" class="anchor" href="#%E4%BA%A4%E6%B5%81%E8%AE%A8%E8%AE%BA" aria-hidden="true"><span class="octicon octicon-link"></span></a>交流讨论</h2>

<ul>
<li><a href="https://github.com/meolu/walle-web/blob/master/docs/qa.md">常见问题及解决办法手册</a></li>
<li><a href="https://github.com/meolu/walle-web/issues/new">submit issue</a></li>
<li>QQ群: 482939318</li>
</ul>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/meolu/walle-web">walle</a> is maintained by <a href="https://github.com/meolu">meolu</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
